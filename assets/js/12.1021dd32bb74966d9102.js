(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{330:function(e,t,n){"use strict";n.r(t),n.d(t,"addCategory",(function(){return i})),n.d(t,"fetchCategories",(function(){return u})),n.d(t,"deleteCategory",(function(){return s})),n.d(t,"getCategory",(function(){return l})),n.d(t,"updateCategory",(function(){return p})),n.d(t,"clearUpdateCategory",(function(){return f})),n.d(t,"clearCategory",(function(){return d})),n.d(t,"addCategoryError",(function(){return g}));var r=n(36),o=n.n(r),a=n(1),c=n(5).production.SERVER_URL;function i(e){return function(t){o.a.post("".concat(c,"/categories/create"),e).then((function(e){e.data.error?t(g("there was an error adding the category: ".concat(e.data.error))):t({type:a.c,payload:e.data})})).catch((function(e){t(g("there was an error adding the category: ".concat(e)))}))}}function u(){return function(e){o.a.get("".concat(c,"/categories/all")).then((function(t){e({type:a.v,payload:t.data})})).catch((function(e){console.log("error fetching categories: ",e)}))}}function s(e){var t=e.slug;return function(e){o.a.post("".concat(c,"/categories/delete"),{slug:t}).then((function(t){t.data.error?console.log("error: ",t.data.error):e(u())})).catch((function(e){console.log("error deleting the category: ",e)}))}}function l(e){return function(t){o.a.get("".concat(c,"/categories/single/").concat(e)).then((function(e){t({type:a.D,payload:e.data})})).catch((function(e){console.log("error getting category: ",e)}))}}function p(e){return function(t){o.a.post("".concat(c,"/categories/update"),e).then((function(e){e.data.error?t(updateCategoryError("there was an error updating the category: ".concat(e.data.error))):t({type:a.db,payload:e.data})})).catch((function(e){console.log("error upating category: ",e)}))}}function f(){return{type:a.db,payload:""}}function d(){return{type:a.c,payload:""}}function g(e){return{type:a.d,payload:e}}},333:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return g}));var r=n(36),o=n.n(r),a=n(25),c=n(1),i=n(5).production.SERVER_URL;function u(e){return function(t){o.a.get("".concat(i,"/articles/single/").concat(e)).then((function(e){var n={};n=e.data?e.data:{category:[],themes:[],images:null},t({type:c.C,payload:n})})).catch((function(e){console.log("error getting article: ",e)}))}}function s(e){var t={headers:{"content-type":"multipart/form-data"}};return function(n){o.a.post("".concat(i,"/articles/create"),e,t).then((function(e){e.data.error?n(g("There was an error creating the article: ".concat(e.data.error))):n({type:c.a,payload:e.data})})).catch((function(e){n(g("there was an error creating the article: ".concat(e)))}))}}function l(e){var t={headers:{"content-type":"multipart/form-data"}};return function(n){o.a.post("".concat(i,"/articles/update"),e,t).then((function(e){var t;e.data.error?n((t="there was an error updating the article: ".concat(e.data.error),{type:c.cb,payload:t})):n({type:c.bb,payload:e.data})})).catch((function(e){console.log("there was an error updating the article: ",e)}))}}function p(e,t,n,r){return function(t,n){o.a.post("".concat(i,"/articles/delete"),{article:e}).then((function(e){e.data.error?console.log("error: ",e.data.error):t(Object(a.searchArticles)(n().global))})).catch((function(e){console.log("error deleting the article: ",e)}))}}function f(){return{type:c.a,payload:""}}function d(){return{type:c.bb,payload:""}}function g(e){return{type:c.b,payload:e}}}).call(this,n(32))},339:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36),o=n.n(r),a=n(1),c=n(5).production.SERVER_URL;function i(){return function(e){o.a.get("".concat(c,"/tags/all")).then((function(t){e({type:a.x,payload:t.data})})).catch((function(e){console.log("error fetching tags: ",e)}))}}},340:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(92),c=n(329),i=n(335),u=n(336);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,f(t).call(this,e))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(a.a,{type:"input",label:"name:",name:"name",component:c.a,onChange:this.props.onInputChange,onFocus:this.props.onInputChange}),o.a.createElement(a.a,{label:"slug:",name:"slug",component:c.a,onChange:this.props.onInputChange,onFocus:this.props.onInputChange}),o.a.createElement(a.a,{name:"categories",label:"categories",component:u.a,selectItems:this.props.categories,onChange:this.props.onInputChange,onFocus:this.props.onInputChange}),o.a.createElement(a.a,{name:"tags",label:"tags",component:u.a,selectItems:this.props.tags,onChange:this.props.onInputChange,onFocus:this.props.onInputChange}),o.a.createElement(a.a,{type:"textarea",label:"body",name:"body",component:i.a,onChange:this.props.onInputChange,onFocus:this.props.onInputChange}))}}])&&l(n.prototype,r),s&&l(n,s),t}(r.Component);t.a=g},368:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(93),c=n(55),i=n(6),u=n(333),s=n(330),l=n(339),p=n(326),f=n(340),d=n(338),g=(n(12),n(337)),h=n(328);n(100);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,v(t).call(this,e))).state={recentValue:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentWillMount",value:function(){this.props.fetchCategories(),this.props.fetchTags()}},{key:"componentWillReceiveProps",value:function(e){e.location!==this.props.location&&(this.props.reset("article-add"),this.clearMessages())}},{key:"componentDidUpdate",value:function(e){this.props.articleAdded&&e.articleAdded!==this.props.articleAdded&&this.props.addArticleError("")}},{key:"componentWillUnmount",value:function(){this.clearMessages()}},{key:"clearMessages",value:function(){this.props.clearArticle(),this.props.addArticleError("")}},{key:"handleFormSubmit",value:function(e){var t;t=Object(g.b)(e,["categories","tags"]),this.props.addArticle(Object(g.a)("images",t))}},{key:"renderAdded",value:function(){if(this.props.articleAdded&&!this.props.errorMessage)return o.a.createElement("div",{className:"submission-message"},o.a.createElement("span",null,"Article: ",this.props.articleAdded.name,o.a.createElement("br",null),"successfully added. "))}},{key:"renderError",value:function(){if(this.props.errorMessage)return o.a.createElement("div",{className:"alert alert-danger"},o.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage)}},{key:"onInputChange",value:function(){this.clearMessages()}},{key:"render",value:function(){var e=this.props.handleSubmit;return o.a.createElement("div",{className:"admin-main"},o.a.createElement("div",{className:"row"},o.a.createElement(p.a,null),o.a.createElement("div",{className:"main-window columns small-12 large-9"},o.a.createElement("h3",null,"Add Article"),o.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},o.a.createElement(f.a,{onInputChange:this.onInputChange.bind(this),treeTables:this.props.treeTables,categories:this.props.categories,tags:this.props.tags}),o.a.createElement(d.a,{name:"images",classNameLabel:"file-input-label",onChange:this.onInputChange.bind(this),tags:this.props.tags}),o.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Submit")),this.renderAdded(),this.renderError())))}}])&&m(n.prototype,r),a&&m(n,a),t}(r.Component);t.default=Object(h.a)(Object(a.a)({validate:function(e){var t={};return e.name||(t.name="Please enter a name"),e.slug||(t.slug="Please enter a slug"),e.category||(t.category="Please enter a category"),e.categories||(t.categories="Please enter at least one category"),t},form:"article-add",fields:["name","slug","files"]})(Object(i.b)((function(e){return{articleAdded:e.article.articleAdded,errorMessage:e.article.addArticleError,categories:e.categories.all,tags:e.tags.all}}),{addArticle:u.a,clearArticle:u.c,addArticleError:u.b,fetchCategories:s.fetchCategories,fetchTags:l.a,reset:c.b})(C)))}}]);