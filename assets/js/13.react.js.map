{"version":3,"sources":["webpack:///./src/js/react-app/actions/auth/index.js","webpack:///./src/js/react-app/components/admin/auth/signin.js","webpack:///./src/js/react-app/components/admin/parts/form_fields.js"],"names":["env","process","SERVER_URL","require","POST_CONFIG","signinUser","email","password","key","dispatch","axios","post","then","response","data","token","type","AUTH_USER","localStorage","setItem","authError","catch","signupUser","error","ADD_USER","payload","err","clearUser","AUTH_ERROR","signoutUser","removeItem","UNAUTH_USER","fetchMessage","get","headers","authorization","getItem","FETCH_MESSAGE","message","Signin","props","authenticated","history","push","globals","ADMIN_URL","nextProps","errorMessage","handleSubmit","fields","handleFormSubmit","bind","renderField","renderAlert","Component","validate","formProps","errors","mapStateToProps","state","auth","reduxForm","form","connect","field","meta","touched","className","label","input"],"mappings":"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","file":"13.react.js","sourcesContent":["import axios from 'axios';\r\nimport history from '../../history';\r\n//config\r\nconst env = process.env.NODE_ENV || \"development\";\r\nvar { SERVER_URL } = require('../../config')[env];\r\nvar { POST_CONFIG } = require('../../config')['globals'];\r\nimport {\r\n  AUTH_USER,\r\n  UNAUTH_USER,\r\n  AUTH_ERROR,\r\n  FETCH_MESSAGE,\r\n  ADD_USER\r\n} from '../types';\r\n\r\nexport function signinUser({ email, password, key }) {\r\n  return function(dispatch) {\r\n    // Submit email/password to the server\r\n    axios.post(`${SERVER_URL}/users/sign_in`, { email, password, key }, POST_CONFIG)\r\n      .then(response => {\r\n        // If request is good...\r\n        if(response.data.token) {\r\n          // - Update state to indicate user is authenticated\r\n          dispatch({ type: AUTH_USER });\r\n          // - Save the JWT token\r\n          localStorage.setItem('token', response.data.token);\r\n        } else {\r\n          // - Show an error to the user\r\n          dispatch(authError('Bad Login Info'));\r\n        }\r\n      })\r\n      .catch(() => {\r\n        // If request is bad...\r\n        // - Show an error to the user\r\n        dispatch(authError('Error logging in'));\r\n      });\r\n  }\r\n}\r\n\r\nexport function signupUser({ email, password }) {\r\n  return function(dispatch) {\r\n    axios.post(`${SERVER_URL}/users/create`, { email, password })\r\n      .then(response => {\r\n        if(response.data.error) {\r\n          dispatch(authError(`there was an error signing up user: ${response.data.error}`));\r\n        } else {\r\n          dispatch({\r\n            type: ADD_USER,\r\n            payload: response.data\r\n          });\r\n          //localStorage.setItem('token', response.data.token);\r\n        }\r\n      })\r\n      .catch(err => dispatch(authError(`there was an error signing up: ${err}`)));\r\n  }\r\n}\r\n\r\nexport function clearUser() {\r\n  return {\r\n    type: ADD_USER,\r\n    payload: ''\r\n  }\r\n}\r\n\r\nexport function authError(error) {\r\n  return {\r\n    type: AUTH_ERROR,\r\n    payload: error\r\n  };\r\n}\r\n\r\nexport function signoutUser() {\r\n  localStorage.removeItem('token');\r\n  return { type: UNAUTH_USER };\r\n}\r\n\r\nexport function fetchMessage() {\r\n  return function(dispatch) {\r\n    axios.get(SERVER_URL, {\r\n      headers: { authorization: localStorage.getItem('token') }\r\n    })\r\n      .then(response => {\r\n        dispatch({\r\n          type: FETCH_MESSAGE,\r\n          payload: response.data.message\r\n        });\r\n      });\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { signinUser } from '../../../actions/auth';\r\nimport { connect } from 'react-redux';\r\nimport renderField from '../parts/form_fields';\r\nimport { globals } from '../../../config.js';\r\n\r\n\r\nclass Signin extends Component {\r\n\r\n    componentWillMount() {\r\n        if (this.props.authenticated) {\r\n          // if the user is already logged in, just forward them right to the dashboard\r\n          this.props.history.push('/'+globals.ADMIN_URL);\r\n        }\r\n    }\r\n\r\n    componentWillUpdate(nextProps) {\r\n        if (nextProps.authenticated) {\r\n          //if just authenticated, redirect to dashboard\r\n          this.props.history.push('/'+globals.ADMIN_URL);\r\n        }\r\n    }\r\n\r\n    handleFormSubmit({ email, password, key }) {\r\n        //need to do sometihing to log user in\r\n        this.props.signinUser({ email, password, key });\r\n    }\r\n\r\n    renderAlert() {\r\n        if (this.props.errorMessage) {\r\n            return (\r\n                <div className=\"alert alert-danger\">\r\n                    <strong>Oops!</strong> {this.props.errorMessage}\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //props that are pulled off of redux form\r\n        const { handleSubmit, fields: {email, password, key} } = this.props;\r\n\r\n        return (\r\n            <div className=\"admin-main\">\r\n            <div className=\"row\">\r\n                    <div className=\"columns small-12\">\r\n                        <h1 className=\"margin-bottom\">Login:</h1>\r\n                        <form onSubmit={handleSubmit(this.handleFormSubmit.bind(this))}>\r\n                            <Field\r\n                              label=\"Email:\"\r\n                              name=\"email\"\r\n                              component={renderField}\r\n                            />\r\n                            <Field\r\n                              label=\"Password:\"\r\n                              name=\"password\"\r\n                              component={renderField}\r\n                            />\r\n                            <Field\r\n                              label=\"Key:\"\r\n                              name=\"key\"\r\n                              component={renderField}\r\n                            />\r\n\r\n                            { this.renderAlert() }\r\n                            <button action=\"submit\" className=\"btn btn-primary\">Sign in</button>\r\n                        </form>\r\n                    </div>\r\n            </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction validate(formProps) {\r\n  const errors = {};\r\n\r\n  if (!formProps.email) {\r\n    errors.email = 'Please enter an email';\r\n  }\r\n\r\n  if (!formProps.password) {\r\n    errors.password = 'Please enter a password';\r\n  }\r\n\r\n  if (!formProps.key) {\r\n    errors.key = 'Please enter a key';\r\n  }\r\n  \r\n  return errors;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    //have our state to show up in props as errorMessage\r\n    return {\r\n        authenticated: state.auth.authenticated,\r\n        errorMessage: state.auth.error,\r\n        authenticated: state.auth.authenticated\r\n    }\r\n}\r\n\r\nexport default reduxForm({\r\n    validate,\r\n    form: 'signin',\r\n    fields: ['email', 'password']\r\n})(\r\n    connect(mapStateToProps, { signinUser })(Signin)\r\n    );\r\n","import React from 'react';\r\n\r\nfunction renderField(field) {\r\n  const { meta: { touched, error } } = field;\r\n  const className = `form-group ${touched && error ? 'has-danger' : ''}`;\r\n\r\n    if (field.type === 'textarea') {\r\n        return (\r\n          <div className={className}>\r\n            <label>{field.label}</label>\r\n            <textarea\r\n              className=\"form-control\"\r\n              rows=\"12\" \r\n              cols=\"50\"\r\n              {...field.input}\r\n              >\r\n            </textarea>\r\n            <div className=\"error\">\r\n              {touched ? error : ''}\r\n            </div>\r\n          </div>\r\n        );\r\n    } else {\r\n        return (\r\n          <div className={className}>\r\n            <label>{field.label}</label>\r\n            <input\r\n              className=\"form-control\"\r\n              type=\"text\"\r\n              {...field.input}\r\n            />\r\n            <div className=\"error\">\r\n              {touched ? error : ''}\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default renderField;"],"sourceRoot":""}