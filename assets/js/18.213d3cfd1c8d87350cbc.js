(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{329:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.meta,n=t.touched,r=t.error,i="form-group ".concat(n&&r?"has-danger":"");return"textarea"===e.type?a.a.createElement("div",{className:i},a.a.createElement("label",null,e.label),a.a.createElement("textarea",o({className:"form-control",rows:"12",cols:"50"},e.input)),a.a.createElement("div",{className:"error"},n?r:"")):a.a.createElement("div",{className:i},a.a.createElement("label",null,e.label),a.a.createElement("input",o({className:"form-control",type:"text"},e.input)),a.a.createElement("div",{className:"error"},n?r:""))}},332:function(e,t,n){"use strict";n.r(t),n.d(t,"signinUser",(function(){return c})),n.d(t,"signupUser",(function(){return u})),n.d(t,"clearUser",(function(){return l})),n.d(t,"authError",(function(){return p})),n.d(t,"signoutUser",(function(){return m})),n.d(t,"fetchMessage",(function(){return f}));var r=n(36),a=n.n(r),o=(n(11),n(1)),i=n(5).production.SERVER_URL,s=n(5).globals.POST_CONFIG;function c(e){var t=e.email,n=e.password,r=e.key;return function(e){a.a.post("".concat(i,"/users/sign_in"),{email:t,password:n,key:r},s).then((function(t){t.data.token?(e({type:o.k}),localStorage.setItem("token",t.data.token)):e(p("Bad Login Info"))})).catch((function(){e(p("Error logging in"))}))}}function u(e){var t=e.email,n=e.password;return function(e){a.a.post("".concat(i,"/users/create"),{email:t,password:n}).then((function(t){t.data.error?e(p("there was an error signing up user: ".concat(t.data.error))):e({type:o.i,payload:t.data})})).catch((function(t){return e(p("there was an error signing up: ".concat(t)))}))}}function l(){return{type:o.i,payload:""}}function p(e){return{type:o.j,payload:e}}function m(){return localStorage.removeItem("token"),{type:o.ab}}function f(){return function(e){a.a.get(i,{headers:{authorization:localStorage.getItem("token")}}).then((function(t){e({type:o.w,payload:t.data.message})}))}}},364:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(92),i=n(93),s=n(332),c=n(6),u=n(329),l=n(5);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return m(this,t),d(this,y(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"componentWillMount",value:function(){this.props.authenticated&&this.props.history.push("/"+l.globals.ADMIN_URL)}},{key:"componentWillUpdate",value:function(e){e.authenticated&&this.props.history.push("/"+l.globals.ADMIN_URL)}},{key:"handleFormSubmit",value:function(e){var t=e.email,n=e.password,r=e.key;this.props.signinUser({email:t,password:n,key:r})}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return a.a.createElement("div",{className:"alert alert-danger"},a.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.fields;return n.email,n.password,n.key,a.a.createElement("div",{className:"admin-main"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"columns small-12"},a.a.createElement("h1",{className:"margin-bottom"},"Login:"),a.a.createElement("form",{onSubmit:t(this.handleFormSubmit.bind(this))},a.a.createElement(o.a,{label:"Email:",name:"email",component:u.a}),a.a.createElement(o.a,{label:"Password:",name:"password",component:u.a}),a.a.createElement(o.a,{label:"Key:",name:"key",component:u.a}),this.renderAlert(),a.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Sign in")))))}}])&&f(n.prototype,r),i&&f(n,i),t}(r.Component);t.default=Object(i.a)({validate:function(e){var t={};return e.email||(t.email="Please enter an email"),e.password||(t.password="Please enter a password"),e.key||(t.key="Please enter a key"),t},form:"signin",fields:["email","password"]})(Object(c.b)((function(e){return t={authenticated:e.auth.authenticated,errorMessage:e.auth.error},n="authenticated",r=e.auth.authenticated,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t;var t,n,r}),{signinUser:s.signinUser})(h))}}]);